"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4706],{5050:function(e,t,a){a.d(t,{Ct:function(){return l},El:function(){return n},fV:function(){return i},on:function(){return r}});var s=a(5893);let l=e=>{let{children:t}=e;return(0,s.jsx)("span",{className:" text-xs font-medium mr-1 sm:mr-2 px-1 sm:px-2.5 py-0.5 rounded bg-gray-700 text-blue-400 border border-blue-400",children:t})},n=e=>{let{children:t,className:a}=e;return(0,s.jsx)("span",{className:"text-xs font-semibold mr-1 sm:mr-2 px-1 sm:px-2.5 py-0.5 rounded  bg-secondary  text-white border border-secondary ".concat(a),children:t})},i=e=>{let{children:t,onClick:a}=e;return(0,s.jsx)("span",{onClick:a,className:" text-xs font-semibold mr-1 sm:mr-2 px-1 sm:px-1.5 py-0.5 rounded bg-white text-black border border-white cursor-pointer",children:t})},r=e=>{let{children:t,onClick:a,className:l}=e;return(0,s.jsx)("span",{onClick:a,className:"".concat(l," text-xs font-medium mr-1 px-2.5 py-0.5 rounded  bg-transparent  text-gray  border border-gray"),children:t})}},5103:function(e,t,a){var s=a(5893);let l=e=>{let{items:t}=e;return(0,s.jsx)(s.Fragment,{children:t.map((e,t)=>(0,s.jsx)("div",{className:"mt-2 border-0 border-b-2 border-gray/20 bg-transparent",children:(0,s.jsxs)("div",{className:"flex py-2.5 text-sm sm:text-base",children:[(0,s.jsx)("div",{className:"flex-2 font-medium leading-snug",children:e[0]}),(0,s.jsx)("div",{className:"flex-1 font-bold text-white text-right",children:e[1]})]})},t))})};t.Z=l},4706:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var s,l,n,i,r=a(5893),o=a(1163),c=a(4509),d=a(794),m=a(2835);let u=e=>{let{network:t,system:a,vaultInfo:s,isTestnet:l,activeValidators:n}=e;m.find(e=>e.name===t);let i=n?new Date().getDay()%n.length:0,o=n?n[i]:void 0,c=0;if(s){let u=(0,d.Z)(s.current_balance_with_rewards).dividedBy(1e9);c=.8*Number(u)}return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"relative mx-auto w-full overflow-hidden rounded-lg h-[200px] bg-black py-2 pb-0",children:[(0,r.jsx)("span",{className:"absolute ltr:-right-[30px] rtl:-left-[30px] rtl:rotate-y-180",children:(0,r.jsxs)("svg",{width:"244",height:"244",viewBox:"0 0 244 244",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"122",cy:"122",r:"121",stroke:"url(#paint0_linear_991_12443)",strokeOpacity:"0.5",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"12 8"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"paint0_linear_991_12443",x1:"218.5",y1:"209",x2:"156",y2:"141.5",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#47BDFF"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#47BDFF",stopOpacity:"0"})]})})]})}),(0,r.jsx)("span",{className:"absolute top-[55px] rounded-full ltr:-left-[40px] rtl:-right-[60px] rtl:rotate-y-180",children:(0,r.jsxs)("svg",{width:"244",height:"244",viewBox:"0 0 244 244",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"122",cy:"122",r:"121",stroke:"url(#paint0_linear_991_12442)",strokeOpacity:"0.5",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"12 8"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"paint0_linear_991_12442",x1:"86.5",y1:"8.5",x2:"183.5",y2:"149.5",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#B476E5"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#B476E5",stopOpacity:"0"})]})})]})}),(0,r.jsx)("span",{className:"absolute inset-x-0 top-[10px] -left-[20px]",children:(0,r.jsx)("img",{src:"/assets/images/healthcare/shadow.png",alt:""})}),(0,r.jsxs)("div",{className:"w-full px-2 sm:px-4 py-4 flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsxs)("div",{className:" flex flex-row text-lg text-white ",children:[(0,r.jsx)("img",{className:"h-5 w-5 mt-auto mb-auto ml-2 rounded-full",src:"sui"===t?"/assets/images/sui-sui-logo.svg":"/assets/images/aptos-logo.png",alt:""}),(0,r.jsx)("div",{className:"mt-auto mb-auto ml-2",children:t.toUpperCase()})]}),(0,r.jsxs)("div",{className:"ml-auto flex flex-row pr-4 justify-between",children:[(0,r.jsxs)("h4",{className:"!font-black ml-auto mt-0.5",children:["CURRENT ",(0,r.jsx)("span",{className:"text-secondary",children:"APY"})]}),(0,r.jsxs)("h4",{className:"text-white mr-auto ml-3.5 text-2xl sm:text-[28px] leading-7 font-bold",children:[a&&Number(a.avgApy).toLocaleString(),"%"]})]})]}),(0,r.jsxs)("div",{className:"ml-auto text-right mt-1.5 pr-4",children:[(0,r.jsxs)("div",{className:" py-0.5 text-sm flex flex-row",children:[(0,r.jsx)("span",{className:"font-bold mr-2",children:"Total staked:"}),(0,r.jsxs)("div",{className:"   flex flex-row  text-white text-sm ",children:["$",c.toLocaleString()]})]}),(0,r.jsxs)("div",{className:" py-0.5 text-sm flex flex-row",children:[(0,r.jsx)("span",{className:"font-bold mr-2",children:"Network:"}),(0,r.jsx)("div",{className:"   flex flex-row  text-white text-sm ",children:l?"Testnet":"Mainnet"})]}),(0,r.jsxs)("div",{className:" py-0.5 text-sm flex flex-row",children:[(0,r.jsx)("span",{className:"font-bold mr-2",children:"Unstake delay:"}),(0,r.jsx)("div",{className:"   flex flex-row  text-white text-sm ",children:"1d"})]})]}),(0,r.jsxs)("div",{className:"mt-auto flex flex-row ",children:[(0,r.jsxs)("div",{className:"relative mt-auto mb-auto",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-secondary rounded-full"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-secondary rounded-full absolute top-0 left-0 animate-ping"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-secondary rounded-full absolute top-0 left-0 animate-pulse"})]}),(0,r.jsx)("div",{className:"font-semibold my-auto mx-2.5 ",children:"Validator"}),o&&(0,r.jsxs)("div",{className:" text-white flex flex-row",children:[(0,r.jsx)("div",{className:"my-auto",children:(0,r.jsx)("img",{className:"h-5 w-5 bg-white rounded-full",src:null==o?void 0:o.imageUrl,alt:""})}),(0,r.jsx)("div",{className:"my-auto ml-2.5",children:null==o?void 0:o.name})]})]})]})]})})};var x=a(7294),p=a(5533),g=a(1966),h=a(5050);let f=e=>{let{value:t,onChange:a,symbol:s,available:l}=e,n="";return"apt"===s?n="/assets/images/aptos-logo.png":"sui"===s&&(n="/assets/images/sui-sui-logo.svg"),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"block leading-6 mb-2 text-gray ",children:"Enter deposit amount"}),(0,r.jsxs)("div",{className:"grid grid-cols-7",children:[(0,r.jsx)("div",{className:"col-span-5",children:(0,r.jsx)("input",{value:t,onChange(e){a(e.target.value)},type:"number",id:"input-asset",className:"block w-full p-4  rounded-l-lg text-base bg-[#141F32] border border-gray/30 placeholder-gray text-white focus:outline-none"})}),(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)("div",{className:"cursor-default flex border border-l-0 border-gray/30 bg-gray/30 rounded-r-lg h-full",children:(0,r.jsxs)("div",{className:"m-auto flex flex-row text-white font-normal",children:[(0,r.jsx)("img",{className:"h-5 w-5 mt-0.5 rounded-full",src:n,alt:""}),(0,r.jsx)("div",{className:"mt-auto mb-auto ml-1.5",children:s.toUpperCase()})]})})})]}),(0,r.jsxs)("div",{className:"text-xs flex flex-row my-2",children:[(0,r.jsxs)("div",{className:"font-medium ",children:["Available: ",Number(l).toFixed(3)," ",s.toUpperCase()]}),(0,r.jsxs)("div",{className:"ml-auto flex flex-row ",children:[(0,r.jsxs)(h.on,{onClick:()=>a(1),className:"cursor-pointer hover:bg-gray hover:text-black",children:["1"," ",s.toUpperCase()]}),(0,r.jsx)(h.on,{onClick:()=>a(Math.floor(500*Number(l))/1e3),className:"cursor-pointer hover:bg-gray hover:text-black",children:"50%"}),(0,r.jsx)(h.on,{onClick:()=>a(Math.floor(1e3*Number(l))/1e3),className:"cursor-pointer hover:bg-gray hover:text-black",children:"Max"})]})]})]})};var b=a(5103);let v=e=>{let{value:t,onChange:a,balance:s,symbol:l}=e,n="";return"apt"===l?n="/assets/images/aptos-logo.png":"sui"===l&&(n="/assets/images/sui-sui-logo.svg"),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"block leading-6 mb-2 text-gray ",children:"Enter withdraw amount"}),(0,r.jsxs)("div",{className:"grid grid-cols-7",children:[(0,r.jsx)("div",{className:"col-span-5",children:(0,r.jsx)("input",{value:t,onChange(e){a(e.target.value)},type:"number",id:"input-withdraw-asset",className:"block w-full p-4  rounded-l-lg text-base bg-[#141F32] border border-gray/30   placeholder-gray text-white focus:outline-none"})}),(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)("div",{className:"cursor-default flex border border-l-0 border-gray/30 bg-gray/30 rounded-r-lg h-full",children:(0,r.jsxs)("div",{className:"m-auto flex flex-row text-white font-normal",children:[(0,r.jsx)("img",{className:"h-5 w-5 mt-0.5 rounded-full",src:n,alt:""}),(0,r.jsxs)("div",{className:"mt-auto mb-auto ml-1.5",children:["lv",l.toUpperCase()]})]})})})]}),(0,r.jsxs)("div",{className:"text-xs flex flex-row my-2",children:[(0,r.jsxs)("div",{className:"font-medium ",children:["Available: ",Number(s).toFixed(3)," lv",l.toUpperCase()]}),(0,r.jsxs)("div",{className:"ml-auto flex flex-row ",children:[(0,r.jsxs)(h.on,{onClick:()=>a(1),className:"cursor-pointer hover:bg-gray hover:text-black",children:["1 lv",l.toUpperCase()]}),(0,r.jsx)(h.on,{onClick:()=>a(Math.floor(500*Number(s))/1e3),className:"cursor-pointer hover:bg-gray hover:text-black",children:"50%"}),(0,r.jsx)(h.on,{onClick:()=>a(s),className:"cursor-pointer hover:bg-gray hover:text-black",children:"Max"})]})]})]})};var j=a(9506),w=a(1085),N=a(3824),y=a(5568);let k=y.find(e=>"sui"===e.name),C="0x0000000000000000000000000000000000000000000000000000000000000005",_=()=>{let e=(0,c.Os)(),t=async e=>{let t=new w.uY({url:(0,N.I)(e?"testnet":"mainnet")}),a=e?k.modules.testnet.vaultGlobal:k.modules.mainnet.vaultGlobal,{data:s}=await t.getObject({id:a,options:{showType:!1,showOwner:!1,showPreviousTransaction:!1,showDisplay:!1,showContent:!0,showBcs:!1,showStorageRebate:!1}}),l=null==s?void 0:s.content;return{staking_pool_ids:l.fields.config.fields.staking_pool_ids,staking_pools:l.fields.config.fields.staking_pools,total_lp_amount:l.fields.total_lp_amount,current_balance_with_rewards:l.fields.current_balance_with_rewards}},a=(0,x.useCallback)(async(t,a)=>{var s;let l;if(!e)return;let n=null==e?void 0:null===(s=e.account)||void 0===s?void 0:s.address,i=a?k.modules.testnet.vaultGlobal:k.modules.mainnet.vaultGlobal,r=a?k.modules.testnet.packageId:k.modules.mainnet.packageId,o=new w.uY({url:(0,N.I)(a?"testnet":"mainnet")}),c=await o.call("suix_getOwnedObjects",[n,{filter:{MatchAll:[{StructType:"0x2::coin::Coin<".concat(r,"::vault::VAULT>")}]},options:{showContent:!0}}]),m=c.data.map(e=>{let{data:t}=e;return{objectId:t.objectId,balance:t.content.fields.balance}});console.log("allObjects : ",m);let u=m.find(e=>(0,d.Z)(e.balance).gte((0,d.Z)(t).multipliedBy(1e9)));if(console.log("objectToBuy : ",u),u){if((0,d.Z)(u.balance).eq((0,d.Z)(t).multipliedBy(1e9))){let{objectId:x}=u,p=new j.a;p.moveCall({target:"".concat(r,"::vault::request_redeem"),arguments:[p.pure(C),p.pure("".concat(i)),p.pure(x)]});let g=await e.signAndExecuteTransactionBlock({transactionBlock:p});l=g.digest}else{let{objectId:h}=u,f=new j.a,[b]=f.splitCoins(h,["".concat((0,d.Z)(t).multipliedBy((0,d.Z)(1e9)))]);f.moveCall({target:"".concat(r,"::vault::request_redeem"),arguments:[f.pure(C),f.pure("".concat(i)),b]});let v=await e.signAndExecuteTransactionBlock({transactionBlock:f});l=v.digest}}else{let y=m.sort(function(e,t){return(0,d.Z)(t.balance).minus((0,d.Z)(e.balance))});if(y.length>=2){let _=y[0].objectId,Z=y.filter((e,t)=>0!==t).map(e=>e.objectId),A=new j.a;A.mergeCoins(_,Z);let[S]=A.splitCoins(_,["".concat((0,d.Z)(t).multipliedBy((0,d.Z)(1e9)))]);A.moveCall({target:"".concat(r,"::vault::request_redeem"),arguments:[A.pure(C),A.pure("".concat(i)),S]});let B=await e.signAndExecuteTransactionBlock({transactionBlock:A});l=B.digest}else throw Error("Insufficient amount")}return l},[e]),s=(0,x.useCallback)(async(t,a)=>{let s=a?k.modules.testnet.vaultGlobal:k.modules.mainnet.vaultGlobal,l=a?k.modules.testnet.packageId:k.modules.mainnet.packageId,n=new j.a,[i]=n.splitCoins(n.gas,[n.pure((0,d.Z)(t).multipliedBy(1e9))]);n.moveCall({target:"".concat(l,"::vault::mint_from_sui"),arguments:[n.pure(C),n.pure("".concat(s)),i]});let r=await e.signAndExecuteTransactionBlock({transactionBlock:n});return r.digest},[e]);return{getVaultInfo:t,mintWithSui:s,exit:a}};var Z=a(7303),A=a(1473);(s=n||(n={})).Deposit="deposit",s.Withdraw="withdraw";let S=e=>{let{vaultInfo:t}=e,{balance:a}=(0,c.r4)(),{balances:s}=(0,x.useContext)(A.E),{mintWithSui:l,exit:i}=_(),{updateTx:o}=(0,x.useContext)(Z.y),m=(0,c.Os)(),{account:u,connected:h}=m;u&&(null==u||u.address);let j=!!h&&!!u&&!!u.chains&&"sui:testnet"===u.chains[0],[w,N]=(0,x.useReducer)((e,t)=>({...e,...t}),{activeTab:n.Deposit,depositAmount:0,errorMessage:void 0,loading:!1}),{activeTab:y,depositAmount:k,errorMessage:C,loading:S}=w,B=0;t&&k>=1&&(B=Number((0,d.Z)(k).multipliedBy((0,d.Z)(t.total_lp_amount)).dividedBy((0,d.Z)(t.current_balance_with_rewards))),(0,d.Z)(k).multipliedBy((0,d.Z)(t.current_balance_with_rewards)).dividedBy((0,d.Z)(t.total_lp_amount)));let M=e=>{N({depositAmount:e})},T=(0,x.useCallback)(async()=>{if(N({errorMessage:void 0}),h){if(!k){N({errorMessage:"Invalid amount"});return}if(k&&k<1){N({errorMessage:"Minimum amount is 1"});return}N({loading:!0});try{let e=await l(k,j);N({depositAmount:0,loading:!1}),o(e)}catch(t){console.log(t),N({errorMessage:"".concat(t.message)})}N({loading:!1})}},[h,k,l,j]),I=(0,x.useCallback)(async()=>{if(N({errorMessage:void 0}),h){if(!k){N({errorMessage:"Invalid amount"});return}if(k&&k<1){N({errorMessage:"Minimum amount is 1"});return}N({loading:!0});try{let e=await i(k,j);N({depositAmount:0,loading:!1}),o(e)}catch(t){console.log(t),N({errorMessage:"".concat(t.message)})}N({loading:!1})}},[h,k,j,i]),E=(0,g.C8)(a,9),F=s?s.find(e=>"lvSUI"===e.symbol):0;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"p-2 px-0 mt-2 lg:mt-0",children:(0,r.jsxs)("div",{className:"rounded-lg bg-black mt-2 ",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 text-center text-base sm:text-lg overflow-hidden font-bold leading-7",children:[(0,r.jsx)("div",{className:"cursor-pointer py-4 ".concat(y===n.Deposit?"text-white":"bg-[#141F32] rounded-tl-lg"),onClick:()=>N({activeTab:n.Deposit,depositAmount:0,errorMessage:void 0}),children:"Stake"}),(0,r.jsx)("div",{className:"cursor-pointer py-4 ".concat(y===n.Withdraw?"text-white":"bg-[#141F32] rounded-tr-lg"),onClick:()=>N({activeTab:n.Withdraw,depositAmount:0,errorMessage:void 0}),children:"Unstake"})]}),(0,r.jsxs)("div",{className:"p-4",children:[y===n.Deposit&&(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)(f,{value:k,onChange:M,symbol:"sui",available:E}),(0,r.jsx)("div",{className:"px-1 mt-4 sm:mt-6",children:(0,r.jsx)(b.Z,{items:[["You will receive","".concat(B.toLocaleString()," lvSUI")]]})}),(0,r.jsx)("div",{className:"flex mt-6",children:(0,r.jsx)("button",{onClick:T,disabled:S,type:"button",className:"btn mx-auto w-full bg-white rounded-md",children:S?(0,r.jsx)(p.BR,{stroke:"#000",className:"w-5 h-5 mx-auto"}):(0,r.jsx)(r.Fragment,{children:"Deposit"})})}),C&&(0,r.jsx)("div",{className:"text-gray-400 mt-2 text-sm font-medium text-center w-full ",children:(0,r.jsx)("div",{className:"p-2 pb-0 text-secondary",children:C})})]}),y===n.Withdraw&&(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)(v,{value:k,onChange:M,symbol:"sui",balance:F?F.balance:0}),(0,r.jsx)("div",{className:"flex mt-6",children:(0,r.jsx)("button",{onClick:I,disabled:S,type:"button",className:"btn mx-auto w-full rounded-md bg-white",children:S?(0,r.jsx)(p.BR,{stroke:"#000",className:"w-5 h-5 mx-auto"}):(0,r.jsx)(r.Fragment,{children:"Proceed"})})}),C&&(0,r.jsx)("div",{className:"text-gray-400 mt-2 text-sm font-medium text-center w-full ",children:(0,r.jsx)("div",{className:"p-2 pb-0 text-secondary",children:C})})]})]})]})})})};var B=a(3904);let M=()=>{let{getVaultInfo:e}=_(),{fetchSuiSystem:t}=(0,B.C)(),{balance:a}=(0,c.r4)(),[s,l]=(0,x.useState)(),[n,i]=(0,x.useState)(),o=(0,c.Os)(),{account:d,connected:m}=o;d&&(null==d||d.address);let p=!!m&&!!d&&!!d.chains&&"sui:testnet"===d.chains[0];(0,x.useEffect)(()=>{t(B.Z.Testnet).then(e=>{t(B.Z.Mainnet).then(t=>{l({mainnet:t,testnet:e})})})},[]),(0,x.useEffect)(()=>{e(p).then(i)},[p]);let g=s?p?s.testnet:s.mainnet:void 0,h=n&&g?n.staking_pools.map(e=>g.validators.find(t=>t.suiAddress===e)).sort((e,t)=>e.name.localeCompare(t.name)):[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{network:"sui",isTestnet:p,activeValidators:h,system:g,vaultInfo:n}),(0,r.jsx)(S,{vaultInfo:n})]})};var T=a(7142);let I=e=>{var t;let{vault:a,address:s,isMainnet:l}=e,n=y.find(e=>"aptos"===e.name),i=null==n?void 0:n.modules.testnet.validators,o=i?new Date().getDay()%i.length:0,c=i?i[o]:void 0;return(0,r.jsxs)("div",{className:" mx-auto w-full flex flex-col overflow-hidden rounded-lg bg-black px-4 py-4 bg-[url(/assets/images/consulting/business-img.png)] bg-cover bg-center bg-no-repeat",children:[(0,r.jsxs)("div",{className:"flex mt-2 mb-1 ",children:[(0,r.jsxs)("div",{className:"flex flex-row text-sm sm:text-lg text-white",children:[(0,r.jsx)("img",{className:"h-5 w-5 mt-auto mb-auto ml-2 rounded-full",src:"/assets/images/aptos-logo.png",alt:""}),(0,r.jsx)("div",{className:"mt-auto mb-auto ml-2 ",children:"APTOS"})]}),(0,r.jsxs)("div",{className:"ml-auto flex flex-row pr-1 sm:pr-4 justify-between",children:[(0,r.jsxs)("h4",{className:"!font-black text-sm sm:text-base ml-auto mt-[5px] tracking-wide sm:mt-0.5",children:["CURRENT ",(0,r.jsx)("span",{className:"text-secondary",children:"APY"})]}),(0,r.jsxs)("h4",{className:"text-white mr-auto ml-1 sm:ml-3.5 text-2xl sm:text-[28px] leading-7 font-bold",children:[null===(t=null==n?void 0:n.current_apy)||void 0===t?void 0:t.toLocaleString(),"%"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 h-full",children:[(0,r.jsx)("div",{className:"col-span-4 sm:col-span-2 hidden sm:flex"}),(0,r.jsx)("div",{className:"col-span-4 sm:col-span-2 flex p-2",children:(0,r.jsxs)("div",{className:"my-auto",children:[(0,r.jsxs)("div",{className:" py-0.5 text-sm flex flex-row",children:[(0,r.jsx)("span",{className:"font-bold mr-2",children:" Total Staked:"}),(0,r.jsxs)("div",{className:"   flex flex-row  text-white text-sm ",children:["$",a?(8*a.totalStaked).toLocaleString():0]})]}),(0,r.jsxs)("div",{className:" py-0.5 text-sm flex flex-row",children:[(0,r.jsx)("span",{className:"font-bold mr-2",children:"Unstaking Delay:"}),(0,r.jsx)("div",{className:"   flex flex-row  text-white text-sm ",children:"3d"})]}),(0,r.jsxs)("div",{className:" py-0.5 text-sm flex flex-row",children:[(0,r.jsx)("span",{className:"font-bold mr-2",children:"Staking Status:"}),(0,r.jsx)("div",{className:"   flex flex-row  text-white text-sm ",children:"Active"})]})]})})]}),(0,r.jsxs)("div",{className:"mt-0.5 flex flex-row ",children:[(0,r.jsxs)("div",{className:"relative mt-auto mb-auto",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-secondary rounded-full"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-secondary rounded-full absolute top-0 left-0 animate-ping"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-secondary rounded-full absolute top-0 left-0 animate-pulse"})]}),(0,r.jsx)("div",{className:"font-semibold my-auto mx-2.5 ",children:"Validator"}),(0,r.jsx)("div",{className:" text-white flex flex-row",children:(0,r.jsx)("div",{className:"my-auto font-semibold",children:(0,g.sC)(c||"0x0")})}),(0,r.jsx)("div",{className:"ml-auto"})]})]})};(l=i||(i={})).Deposit="deposit",l.Withdraw="withdraw";let E=e=>{let{vault:t,address:a,isMainnet:s}=e,{getBalanceAPT:l,getBalanceLP:n,mint:o,requestRedeem:c,estimateRewards:d,estimateLp:m,estimateApt:u}=(0,T.Z)(),{updateTx:g}=(0,x.useContext)(Z.y),[h,j]=(0,x.useReducer)((e,t)=>({...e,...t}),{activeTab:i.Deposit,depositAmount:0,aptAvailable:0,lpAvailable:0,tick:1,errorMessage:void 0,loading:!1}),{activeTab:w,depositAmount:N,errorMessage:y,loading:k,tick:C,aptAvailable:_,lpAvailable:A}=h,S=e=>{j({depositAmount:e})},B=(0,x.useCallback)(()=>{C&&j({tick:C+1})},[C]);(0,x.useEffect)(()=>{a?l(a,s).then(e=>{j({aptAvailable:e})}):j({aptAvailable:0})},[a,s,C]),(0,x.useEffect)(()=>{a?n(a,s).then(e=>{j({lpAvailable:e})}):j({lpAvailable:0})},[a,s,C]);let M=(0,x.useCallback)(async()=>{if(j({errorMessage:void 0}),a){if(!N||N&&N<1){j({errorMessage:"Minimum amount is 1"});return}if(t&&N>=t.totalStaked){j({errorMessage:"Maximum amount is ".concat((t.totalStaked-1).toLocaleString())});return}j({loading:!0});try{let e=await o(N,s);e&&g(e),j({depositAmount:0,loading:!1}),setTimeout(()=>{B()},1e3)}catch(l){console.log(l),j({errorMessage:"".concat(l),loading:!1})}j({loading:!1})}},[a,N,s,t,o]),I=(0,x.useCallback)(async()=>{if(j({errorMessage:void 0}),a){if(N&&N<1){j({errorMessage:"Minimum amount is 1"});return}j({loading:!0});try{let e=await c(N,s);e&&g(e),j({depositAmount:0,loading:!1,errorMessage:"Your request is being processed"}),setTimeout(()=>{B()},1e3)}catch(t){console.log(t),j({errorMessage:"".concat(t),loading:!1})}j({loading:!1})}},[a,N,s,c]),E=N>0?d(N):0,F=N>0?m(N,t):0,U=N>0?u(N,t):0,D=new Date((new Date).getTime()+2592e5);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"p-2 px-0 mt-2 lg:mt-0 h-[500px]",children:(0,r.jsxs)("div",{className:"rounded-lg bg-black mt-2 ",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 text-center text-base sm:text-lg overflow-hidden font-bold leading-7",children:[(0,r.jsx)("div",{className:"cursor-pointer py-4 ".concat(w===i.Deposit?"text-white":"bg-[#141F32] rounded-tl-lg"),onClick:()=>j({activeTab:i.Deposit,depositAmount:0,errorMessage:void 0}),children:"Stake"}),(0,r.jsx)("div",{className:"cursor-pointer py-4 ".concat(w===i.Withdraw?"text-white":"bg-[#141F32] rounded-tr-lg"),onClick:()=>j({activeTab:i.Withdraw,depositAmount:0,errorMessage:void 0}),children:"Unstake"})]}),(0,r.jsxs)("div",{className:"p-4",children:[w===i.Deposit&&(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)(f,{value:N,onChange:S,symbol:"apt",available:_}),(0,r.jsx)("div",{className:"px-1 mt-4 sm:mt-6",children:(0,r.jsx)(b.Z,{items:[["You will receive","".concat(F.toFixed(6)," lvAPT")],["Projected rewards","".concat(E.toLocaleString()," APT per year")]]})}),(0,r.jsx)("div",{className:"flex mt-6",children:(0,r.jsx)("button",{onClick:M,disabled:k,type:"button",className:"btn mx-auto w-full bg-white rounded-md hover:bg-white hover:text-black",children:k?(0,r.jsx)(p.BR,{stroke:"#000",className:"w-5 h-5 mx-auto"}):(0,r.jsx)(r.Fragment,{children:"Deposit"})})}),y&&(0,r.jsx)("div",{className:"text-gray-400 mt-2 text-sm font-medium text-center w-full ",children:(0,r.jsx)("div",{className:"p-2 pb-0 text-secondary",children:y})})]}),w===i.Withdraw&&(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)(v,{value:N,onChange:S,symbol:"apt",balance:A}),(0,r.jsx)("div",{className:"px-1 mt-4 sm:mt-6",children:(0,r.jsx)(b.Z,{items:[["You will receive","".concat(U.toLocaleString()," APT")],["Expected withdrawal completion",D.toLocaleString()]]})}),(0,r.jsx)("div",{className:"flex mt-6",children:(0,r.jsx)("button",{onClick:I,disabled:k,type:"button",className:"btn mx-auto w-full rounded-md bg-white hover:bg-white hover:text-black",children:k?(0,r.jsx)(p.BR,{stroke:"#000",className:"w-5 h-5 mx-auto"}):(0,r.jsx)(r.Fragment,{children:"Proceed"})})}),y&&(0,r.jsx)("div",{className:"text-gray-400 mt-2 text-sm font-medium text-center w-full ",children:(0,r.jsx)("div",{className:"p-2 pb-0 text-secondary",children:y})})]})]})]})})})};var F=a(6187);let U=()=>{let[e,t]=(0,x.useState)(),{getVaultInfo:a}=(0,T.Z)(),{account:s,network:l}=(0,F.Os)(),n=s&&s.address,i=!l||"mainnet"===l.name;return(0,x.useEffect)(()=>{a(i).then(t)},[i]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{vault:e,address:n,isMainnet:i}),(0,r.jsx)(E,{vault:e,address:n,isMainnet:i})]})},D=()=>{let e=(0,o.useRouter)(),t="";return e.pathname.includes("sui")?t="sui":e.pathname.includes("aptos")&&(t="aptos"),(0,r.jsxs)(r.Fragment,{children:["sui"===t&&(0,r.jsx)(M,{}),"aptos"===t&&(0,r.jsx)(U,{})]})};var L=D},3904:function(e,t,a){a.d(t,{Z:function(){return l}});var s,l,n=a(1085),i=a(3824),r=a(794);(s=l||(l={})).Mainnet="mainnet",s.Testnet="testnet";let o=()=>{let e=async e=>{let t=new n.uY({url:(0,i.I)(e)}),a=await t.getLatestSuiSystemState(),s=a.activeValidators,{apys:l}=await t.getValidatorsApy();return{summary:a,avgApy:(s=s.map(e=>{let t=l.find(t=>t.address.toLowerCase()===e.suiAddress.toLowerCase()),a=(0,r.Z)(e.stakingPoolSuiBalance).minus((0,r.Z)(e.nextEpochStake)).absoluteValue().dividedBy((0,r.Z)(1e9));return{name:e.name,description:e.description,imageUrl:e.imageUrl,projectUrl:e.projectUrl,commissionRate:e.commissionRate,nextEpochStake:e.nextEpochStake,stakingPoolActivationEpoch:e.stakingPoolActivationEpoch,stakingPoolSuiBalance:e.stakingPoolSuiBalance,suiAddress:e.suiAddress,stakingPoolId:e.stakingPoolId,vol:"".concat(a),apy:t?100*Number(t.apy):0}}).sort((e,t)=>(0,r.Z)(t.stakingPoolSuiBalance).minus((0,r.Z)(e.stakingPoolSuiBalance)))).map(e=>Number(e.apy)).reduce((e,t)=>e+t,0)/s.length,validators:s}};return{fetchSuiSystem:e}};t.C=o},7142:function(e,t,a){var s=a(2273),l=a(6187),n=a(794),i=a(7294),r=a(5568);let o=()=>{let{account:e,signAndSubmitTransaction:t}=(0,l.Os)(),a=r.find(e=>"aptos"===e.name),o=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=new s.ScN({network:e?s.ZcK.MAINNET:s.ZcK.TESTNET}),a=new s.gZG(t);return a},c=(0,i.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=o(t);try{let s=await a.getAccountResource({accountAddress:e,resourceType:"0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>"}),l=s.coin.value;return Number((0,n.Z)(l).dividedBy((0,n.Z)(1e8)))}catch(r){let i=await a.view({payload:{function:"0x1::primary_fungible_store::balance",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[e,"0xA"]}});return i[0]?Number((0,n.Z)("".concat(i[0])).dividedBy((0,n.Z)(1e8))):0}},[]),d=(0,i.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=t?null==a?void 0:a.modules.mainnet.lp_metadata:null==a?void 0:a.modules.testnet.lp_metadata,l=o(t),i=await l.view({payload:{function:"0x1::primary_fungible_store::balance",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[e,s]}});return i[0]?Number((0,n.Z)("".concat(i[0])).dividedBy((0,n.Z)(1e8))):0},[]),m=(0,i.useCallback)(async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=e?null==a?void 0:a.modules.mainnet.packageId:null==a?void 0:a.modules.testnet.packageId,s=o(e),l=await s.view({payload:{function:"".concat(t,"::vault::get_amounts")}});return{totalStaked:Number((0,n.Z)("".concat(l[0])).dividedBy((0,n.Z)(1e8))),totalLp:Number((0,n.Z)("".concat(l[1])).dividedBy((0,n.Z)(1e8)))}},[]),u=(0,i.useCallback)(async function(s){let l=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return;let i=l?null==a?void 0:a.modules.mainnet.packageId:null==a?void 0:a.modules.testnet.packageId,r=o(l),c={data:{function:"".concat(i,"::vault::mint"),functionArguments:["".concat((0,n.Z)(s).multipliedBy((0,n.Z)(1e8)))]}},d=await t(c);return await r.waitForTransaction({transactionHash:d.hash}),d.hash},[e]),x=(0,i.useCallback)(async function(s){let l=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return;let i=l?null==a?void 0:a.modules.mainnet.packageId:null==a?void 0:a.modules.testnet.packageId,r=o(l),c={data:{function:"".concat(i,"::vault::request_redeem"),functionArguments:["".concat((0,n.Z)(s).multipliedBy((0,n.Z)(1e8)))]}},d=await t(c);return await r.waitForTransaction({transactionHash:d.hash}),d.hash},[e]),p=e=>e*Math.exp(.07)-e,g=(e,t)=>t&&t.totalStaked>e?t.totalLp*(e/t.totalStaked):0,h=(e,t)=>t&&t.totalLp>e?t.totalStaked*(e/t.totalLp):0;return{getBalanceAPT:c,getBalanceLP:d,mint:u,requestRedeem:x,getVaultInfo:m,estimateLp:g,estimateApt:h,estimateRewards:p}};t.Z=o},2835:function(e){e.exports=JSON.parse('[{"name":"sui","image":"/assets/images/sui-sui-logo.png"},{"name":"aptos","image":"/assets/images/aptos-logo.png"}]')},5568:function(e){e.exports=JSON.parse('[{"name":"sui","modules":{"testnet":{"packageId":"0x267221992f689b9e2dd09e00339cbad23f1f94ffa8315e6d0fe3c238d1221ede","managerCap":"0xe70912518d5ed82e941946d7978355a418b1073cf4bcc2c0deaddd4c2731c8a4","vaultGlobal":"0x1752b5826b5889c9792328f6b76063c9e258060a5d4cbb13575363a7699bed98"},"mainnet":{"packageId":"0xff7733fe18fc30cfb60bada75fa756135c54ee8c6db50efd22f5a18ce5e43c21","managerCap":"0x1f299c857b13aca89d974b543511ac94e0c28ee64bc922c11396a5299041fad7","vaultGlobal":"0x64ce36860586a00f8d2c9a4424e00eb72af6e82bb948e1227f24f9feae3a5c52"}}},{"name":"aptos","current_apy":7,"modules":{"testnet":{"packageId":"0x45fa42f6840a7032a97d4d66a45a776be0b8d73bb54182cee82cc41cc7d9a962","validators":["0xa562415be88d9f08ba98fa3f6af9be0e36580c0f8fff5100a50b519e8f4a15c9","0xfd47a2fb988c959839ea2fe4d7169b48536a42bf5e4933790701a08252ba2039"],"lp_metadata":"0xb644db897dced9c8a462fe40b200617fcea49aaa3681bd7f6cb45554808c1fd4"},"mainnet":{"packageId":"0x45fa42f6840a7032a97d4d66a45a776be0b8d73bb54182cee82cc41cc7d9a962","validators":["0xa562415be88d9f08ba98fa3f6af9be0e36580c0f8fff5100a50b519e8f4a15c9","0xfd47a2fb988c959839ea2fe4d7169b48536a42bf5e4933790701a08252ba2039"],"lp_metadata":"0xb644db897dced9c8a462fe40b200617fcea49aaa3681bd7f6cb45554808c1fd4"}}}]')}}]);